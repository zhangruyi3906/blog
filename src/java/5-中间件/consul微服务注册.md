---
title:  consul微服务注册问题
date: 2024-05-16
category:
  - Java
  - 微服务
tag:
  - Java
  - 微服务
---



# consul微服务注册问题

参考连接：https://blog.csdn.net/lushuaiyin/article/details/104585630

consul和微服务间的网络不稳定，断开了几分钟。在此情况下，consul向微服务发的健康检查请求发不通，认为微服务挂了，就从服务列表里剔除他。

当网络恢复后，注意，已经剔除的服务，**consul是不会主动再发健康检查的。那么服务列表里没有他**，也就不正常了。网关的转发都是需要获取可用服务列表，才能做转发的！这时候，你想让微服务注册上consul就只能重启微服务了。这在生产环境意味着什么就不用多说了吧。是不是很坑？
原因：因为consul的健康检查机制是consul主动发